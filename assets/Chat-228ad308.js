import{r as d,q as A,u as j,o as B,s as C,a as o,c as n,b as e,e as p,F as v,k as T,w as E,j as Y,v as q,n as h,x as U,y as m,z as y,A as V,B as z,C as F,t as u,d as H,D as b,T as L,E as N}from"./index-1ddce23d.js";const $=e("h2",null,"Chat Global",-1),G={class:"chat__window"},I={key:0},J={key:1},K={class:"bg-success text-white rounded-2 px-2 py-1"},O={class:""},P=["onSubmit"],Q={class:"mt-3 col-sm-12"},R={class:"me-2 mt-3 col-sm-12"},X={__name:"Chat",props:{isDark:{type:Boolean}},setup(D){let i=d([]),r=d(!1),c=null;const f=A(()=>[...i.value].reverse()),_=j(),l=d(""),g=t=>{if(!t)return"";const a=t.toDate();return b(a).format("DD/MM/YYYY HH:mm:ss")},x=()=>{r.value=!0;try{const t=U(m(y,"chats"),V("createdAt","desc"),z(12));return c=F(t,a=>{i.value=a.docs.map(s=>({id:s.id,...s.data()})),r.value=!1}),c}catch(t){console.log(t),r.value=!1}},k=async(t,a)=>{try{const s=b().toDate(),M=L.fromDate(s),S={msg:t,sender:a,createdAt:M};await N(m(y,"chats"),S)}catch(s){console.error("Error enviando mensaje: ",s)}};B(()=>{x()}),C(()=>{c&&c()});const w=()=>{k(l.value,_.userData.nombre),l.value=""};return(t,a)=>(o(),n(v,null,[$,e("div",null,[e("div",G,[p(r)?(o(),n("div",I,"Loading docs...")):(o(),n("div",J,[e("ul",null,[(o(!0),n(v,null,T(f.value,s=>(o(),n("li",{key:`${s==null?void 0:s.createdAt.seconds}${s==null?void 0:s.createdAt.nanoseconds}`},[e("div",{class:h(["mt-2 me-2 py-1 chat__user",s.sender===p(_).userData.nombre?"text-end":"text-start"])},[e("span",K,u(s==null?void 0:s.sender),1),H(" "+u(g(s==null?void 0:s.createdAt))+" ",1),e("div",O,u(s==null?void 0:s.msg),1)],2)]))),128))])]))]),e("form",{onSubmit:E(w,["prevent"]),class:"input-group input-group-sm mb-3 row"},[e("div",Q,[Y(e("input",{type:"text",class:"form-control",placeholder:"Ingrese Mensaje","onUpdate:modelValue":a[0]||(a[0]=s=>l.value=s)},null,512),[[q,l.value]])]),e("div",R,[e("button",{type:"submit",class:h(["btn col me-2",D.isDark?"btn-outline-primary  bd-dark ":"btn-primary"])},"Enviar",2)])],40,P)])],64))}};export{X as default};
