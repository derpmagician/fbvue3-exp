import{L as ot,M as it,q as ut,r as et,s as V,x as N,y as O,B as G,z as rt,A as j,C as F,D as Q,G as ct,E as lt,I as dt,J as ft}from"./index-c9b0f481.js";var nt={exports:{}};(function(w,D){(function(A,H){w.exports=H()})(ot,function(){var A=1e3,H=6e4,J=36e5,C="millisecond",x="second",_="minute",c="hour",d="day",l="week",f="month",S="quarter",m="year",p="date",L="Invalid Date",z=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,K=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,st={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var r=["th","st","nd","rd"],t=s%100;return"["+s+(r[(t-20)%10]||r[t]||r[0])+"]"}},R=function(s,r,t){var n=String(s);return!n||n.length>=r?s:""+Array(r+1-n.length).join(t)+s},at={s:R,z:function(s){var r=-s.utcOffset(),t=Math.abs(r),n=Math.floor(t/60),e=t%60;return(r<=0?"+":"-")+R(n,2,"0")+":"+R(e,2,"0")},m:function s(r,t){if(r.date()<t.date())return-s(t,r);var n=12*(t.year()-r.year())+(t.month()-r.month()),e=r.clone().add(n,f),a=t-e<0,o=r.clone().add(n+(a?-1:1),f);return+(-(n+(t-e)/(a?e-o:o-e))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:f,y:m,w:l,d,D:p,h:c,m:_,s:x,ms:C,Q:S}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},T="en",Y={};Y[T]=st;var X="$isDayjsObject",Z=function(s){return s instanceof W||!(!s||!s[X])},U=function s(r,t,n){var e;if(!r)return T;if(typeof r=="string"){var a=r.toLowerCase();Y[a]&&(e=a),t&&(Y[a]=t,e=a);var o=r.split("-");if(!e&&o.length>1)return s(o[0])}else{var u=r.name;Y[u]=r,e=u}return!n&&e&&(T=e),e||!n&&T},$=function(s,r){if(Z(s))return s.clone();var t=typeof r=="object"?r:{};return t.date=s,t.args=arguments,new W(t)},i=at;i.l=U,i.i=Z,i.w=function(s,r){return $(s,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var W=function(){function s(t){this.$L=U(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[X]=!0}var r=s.prototype;return r.parse=function(t){this.$d=function(n){var e=n.date,a=n.utc;if(e===null)return new Date(NaN);if(i.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var o=e.match(z);if(o){var u=o[2]-1||0,h=(o[7]||"0").substring(0,3);return a?new Date(Date.UTC(o[1],u,o[3]||1,o[4]||0,o[5]||0,o[6]||0,h)):new Date(o[1],u,o[3]||1,o[4]||0,o[5]||0,o[6]||0,h)}}return new Date(e)}(t),this.init()},r.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},r.$utils=function(){return i},r.isValid=function(){return this.$d.toString()!==L},r.isSame=function(t,n){var e=$(t);return this.startOf(n)<=e&&e<=this.endOf(n)},r.isAfter=function(t,n){return $(t)<this.startOf(n)},r.isBefore=function(t,n){return this.endOf(n)<$(t)},r.$g=function(t,n,e){return i.u(t)?this[n]:this.set(e,t)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(t,n){var e=this,a=!!i.u(n)||n,o=i.p(t),u=function(B,v){var b=i.w(e.$u?Date.UTC(e.$y,v,B):new Date(e.$y,v,B),e);return a?b:b.endOf(d)},h=function(B,v){return i.w(e.toDate()[B].apply(e.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(v)),e)},g=this.$W,y=this.$M,M=this.$D,P="set"+(this.$u?"UTC":"");switch(o){case m:return a?u(1,0):u(31,11);case f:return a?u(1,y):u(0,y+1);case l:var k=this.$locale().weekStart||0,q=(g<k?g+7:g)-k;return u(a?M-q:M+(6-q),y);case d:case p:return h(P+"Hours",0);case c:return h(P+"Minutes",1);case _:return h(P+"Seconds",2);case x:return h(P+"Milliseconds",3);default:return this.clone()}},r.endOf=function(t){return this.startOf(t,!1)},r.$set=function(t,n){var e,a=i.p(t),o="set"+(this.$u?"UTC":""),u=(e={},e[d]=o+"Date",e[p]=o+"Date",e[f]=o+"Month",e[m]=o+"FullYear",e[c]=o+"Hours",e[_]=o+"Minutes",e[x]=o+"Seconds",e[C]=o+"Milliseconds",e)[a],h=a===d?this.$D+(n-this.$W):n;if(a===f||a===m){var g=this.clone().set(p,1);g.$d[u](h),g.init(),this.$d=g.set(p,Math.min(this.$D,g.daysInMonth())).$d}else u&&this.$d[u](h);return this.init(),this},r.set=function(t,n){return this.clone().$set(t,n)},r.get=function(t){return this[i.p(t)]()},r.add=function(t,n){var e,a=this;t=Number(t);var o=i.p(n),u=function(y){var M=$(a);return i.w(M.date(M.date()+Math.round(y*t)),a)};if(o===f)return this.set(f,this.$M+t);if(o===m)return this.set(m,this.$y+t);if(o===d)return u(1);if(o===l)return u(7);var h=(e={},e[_]=H,e[c]=J,e[x]=A,e)[o]||1,g=this.$d.getTime()+t*h;return i.w(g,this)},r.subtract=function(t,n){return this.add(-1*t,n)},r.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||L;var a=t||"YYYY-MM-DDTHH:mm:ssZ",o=i.z(this),u=this.$H,h=this.$m,g=this.$M,y=e.weekdays,M=e.months,P=e.meridiem,k=function(v,b,E,I){return v&&(v[b]||v(n,a))||E[b].slice(0,I)},q=function(v){return i.s(u%12||12,v,"0")},B=P||function(v,b,E){var I=v<12?"AM":"PM";return E?I.toLowerCase():I};return a.replace(K,function(v,b){return b||function(E){switch(E){case"YY":return String(n.$y).slice(-2);case"YYYY":return i.s(n.$y,4,"0");case"M":return g+1;case"MM":return i.s(g+1,2,"0");case"MMM":return k(e.monthsShort,g,M,3);case"MMMM":return k(M,g);case"D":return n.$D;case"DD":return i.s(n.$D,2,"0");case"d":return String(n.$W);case"dd":return k(e.weekdaysMin,n.$W,y,2);case"ddd":return k(e.weekdaysShort,n.$W,y,3);case"dddd":return y[n.$W];case"H":return String(u);case"HH":return i.s(u,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return B(u,h,!0);case"A":return B(u,h,!1);case"m":return String(h);case"mm":return i.s(h,2,"0");case"s":return String(n.$s);case"ss":return i.s(n.$s,2,"0");case"SSS":return i.s(n.$ms,3,"0");case"Z":return o}return null}(v)||o.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(t,n,e){var a,o=this,u=i.p(n),h=$(t),g=(h.utcOffset()-this.utcOffset())*H,y=this-h,M=function(){return i.m(o,h)};switch(u){case m:a=M()/12;break;case f:a=M();break;case S:a=M()/3;break;case l:a=(y-g)/6048e5;break;case d:a=(y-g)/864e5;break;case c:a=y/J;break;case _:a=y/H;break;case x:a=y/A;break;default:a=y}return e?a:i.a(a)},r.daysInMonth=function(){return this.endOf(f).$D},r.$locale=function(){return Y[this.$L]},r.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),a=U(t,n,!0);return a&&(e.$L=a),e},r.clone=function(){return i.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},s}(),tt=W.prototype;return $.prototype=tt,[["$ms",C],["$s",x],["$m",_],["$H",c],["$W",d],["$M",f],["$y",m],["$D",p]].forEach(function(s){tt[s[1]]=function(r){return this.$g(r,s[0],s[1])}}),$.extend=function(s,r){return s.$i||(s(r,W,$),s.$i=!0),$},$.locale=U,$.isDayjs=Z,$.unix=function(s){return $(1e3*s)},$.en=Y[T],$.Ls=Y,$.p={},$})})(nt);var ht=nt.exports;const $t=it(ht),yt=ut("blogpost",()=>{let w=et([]),D=et(!1);return{documents:w,loadingDoc:D,getAllBlogPosts:async()=>{D.value=!0;try{const c=V(N(O,"blog"));(await G(c)).forEach(l=>{w.value.push({id:l.id,...l.data()})})}catch(c){console.log(c)}finally{D.value=!1}},getMyBlogPosts:async()=>{D.value=!0;try{const c=V(N(O,"blog"),rt("user","==",j.currentUser.uid));(await G(c)).forEach(l=>{w.value.push({id:l.id,...l.data()})})}catch(c){console.log(c)}finally{D.value=!1}},leerBlogPost:async c=>{D.value=!0;try{const d=F(O,"blog",c),l=await Q(d);if(!l.exists())throw new Error("doc no existe");if(l.data().user!==j.currentUser.uid)throw new Error("No es dueño del documento");return{titulo:l.data().titulo,detalle:l.data().detalle,image:l.data().image,date:l.data().date}}catch(d){console.log(d.message)}finally{D.value=!1}},updateBlogPost:async(c,d,l,f)=>{D.value=!0;try{const S=F(O,"blog",c),m=await Q(S);if(!m.exists())throw new Error("no existe el doc");if(m.data().user===j.currentUser.uid)await ct(S,{titulo:d,detalle:l,image:f}),w.value=w.value.map(p=>p.id===c?{...p,titulo:d,detalle:l,image:f}:p);else throw new Error("no eres el autor")}catch(S){console.log(S.message)}finally{D.value=!1}},addBlogPost:async(c,d,l="")=>{try{let f,S;do{f=lt(8);const L=N(O,"blog"),z=V(L,rt("short","==",f));S=!(await G(z)).empty}while(S);const m={titulo:c,detalle:d,image:l,user:j.currentUser.uid,date:$t().format("YYYY-MM-DD HH:mm:ss")},p=await dt(N(O,"blog"),m);w.value.push({...m,id:p.id})}catch(f){console.log(f)}},deleteBlogPost:async c=>{try{const d=F(O,"blog",c),l=await Q(d);if(!l.exists())throw new Error("doc no existe");if(l.data().user!==j.currentUser.uid)throw new Error("No es dueño del documento");await ft(F(O,"blog",c)),w.value=w.value.filter(f=>f.id!==c)}catch(d){console.log(d.message)}}}});export{yt as u};
